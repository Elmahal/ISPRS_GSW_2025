// Important notice , you may need 


var water = 
    /* color: #0dbfd6 */
    /* shown: false */
    ee.FeatureCollection(
        [ee.Feature(
            ee.Geometry.Point([55.09655388750977, 25.239305097356226]),
            {
              "Class": 0,
              "system:index": "0"
            }),
        ee.Feature(
            ee.Geometry.Point([55.0927773372168, 25.203897543871797]),
            {
              "Class": 0,
              "system:index": "1"
            }),
        ee.Feature(
            ee.Geometry.Point([55.07938774981446, 25.17127620981859]),
            {
              "Class": 0,
              "system:index": "2"
            }),
        ee.Feature(
            ee.Geometry.Point([55.06256493487305, 25.122794108700667]),
            {
              "Class": 0,
              "system:index": "3"
            }),
        ee.Feature(
            ee.Geometry.Point([55.17105492510743, 25.165061632248925]),
            {
              "Class": 0,
              "system:index": "4"
            }),
        ee.Feature(
            ee.Geometry.Point([55.07183464922852, 25.073359856284345]),
            {
              "Class": 0,
              "system:index": "5"
            }),
        ee.Feature(
            ee.Geometry.Point([55.05569847979493, 25.02794981574162]),
            {
              "Class": 0,
              "system:index": "6"
            }),
        ee.Feature(
            ee.Geometry.Point([55.336879815244146, 25.199237888139585]),
            {
              "Class": 0,
              "system:index": "7"
            }),
        ee.Feature(
            ee.Geometry.Point([55.34580620684571, 25.21507998993061]),
            {
              "Class": 0,
              "system:index": "8"
            }),
        ee.Feature(
            ee.Geometry.Point([55.33275812365703, 25.236970007743185]),
            {
              "Class": 0,
              "system:index": "9"
            }),
        ee.Feature(
            ee.Geometry.Point([55.328638250610155, 25.24271510854267]),
            {
              "Class": 0,
              "system:index": "10"
            }),
        ee.Feature(
            ee.Geometry.Point([55.302889044067186, 25.192785772845685]),
            {
              "Class": 0,
              "system:index": "11"
            }),
        ee.Feature(
            ee.Geometry.Point([55.2859803984373, 25.19006741397323]),
            {
              "Class": 0,
              "system:index": "12"
            }),
        ee.Feature(
            ee.Geometry.Point([55.33490514125186, 25.195710328349517]),
            {
              "Class": 0,
              "system:index": "13"
            }),
        ee.Feature(
            ee.Geometry.Point([55.323532575028715, 25.199244019324183]),
            {
              "Class": 0,
              "system:index": "14"
            }),
        ee.Feature(
            ee.Geometry.Point([55.333488934891996, 25.19388519505253]),
            {
              "Class": 0,
              "system:index": "15"
            }),
        ee.Feature(
            ee.Geometry.Point([55.21609634217274, 24.993138405626354]),
            {
              "Class": 0,
              "system:index": "16"
            }),
        ee.Feature(
            ee.Geometry.Point([55.21935790833485, 24.994694263074805]),
            {
              "Class": 0,
              "system:index": "17"
            }),
        ee.Feature(
            ee.Geometry.Point([55.254505575266, 24.981313245445158]),
            {
              "Class": 0,
              "system:index": "18"
            }),
        ee.Feature(
            ee.Geometry.Point([55.25613635834706, 24.98034073100395]),
            {
              "Class": 0,
              "system:index": "19"
            }),
        ee.Feature(
            ee.Geometry.Point([55.28704490608801, 25.018788100955145]),
            {
              "Class": 0,
              "system:index": "20"
            }),
        ee.Feature(
            ee.Geometry.Point([55.28707709259619, 25.019799199384103]),
            {
              "Class": 0,
              "system:index": "21"
            }),
        ee.Feature(
            ee.Geometry.Point([55.28805341667761, 25.020071416769042]),
            {
              "Class": 0,
              "system:index": "22"
            }),
        ee.Feature(
            ee.Geometry.Point([55.287238025137086, 25.020576961739597]),
            {
              "Class": 0,
              "system:index": "23"
            }),
        ee.Feature(
            ee.Geometry.Point([55.29331141779847, 25.058219268907248]),
            {
              "Class": 0,
              "system:index": "24"
            }),
        ee.Feature(
            ee.Geometry.Point([55.29236728022523, 25.059288355933816]),
            {
              "Class": 0,
              "system:index": "25"
            }),
        ee.Feature(
            ee.Geometry.Point([55.2915518886847, 25.058666342798464]),
            {
              "Class": 0,
              "system:index": "26"
            }),
        ee.Feature(
            ee.Geometry.Point([55.289685071210336, 25.057772193385016]),
            {
              "Class": 0,
              "system:index": "27"
            }),
        ee.Feature(
            ee.Geometry.Point([55.22351084628582, 25.080407548975085]),
            {
              "Class": 0,
              "system:index": "28"
            }),
        ee.Feature(
            ee.Geometry.Point([55.222395047335624, 25.080154900086967]),
            {
              "Class": 0,
              "system:index": "29"
            }),
        ee.Feature(
            ee.Geometry.Point([55.22093592563152, 25.07982451229269]),
            {
              "Class": 0,
              "system:index": "30"
            }),
        ee.Feature(
            ee.Geometry.Point([55.21999178805828, 25.080621328396244]),
            {
              "Class": 0,
              "system:index": "31"
            }),
        ee.Feature(
            ee.Geometry.Point([55.22024928012371, 25.07953299291024]),
            {
              "Class": 0,
              "system:index": "32"
            }),
        ee.Feature(
            ee.Geometry.Point([55.18655661660403, 25.067664647740717]),
            {
              "Class": 0,
              "system:index": "33"
            }),
        ee.Feature(
            ee.Geometry.Point([55.18496874886721, 25.067042677129585]),
            {
              "Class": 0,
              "system:index": "34"
            }),
        ee.Feature(
            ee.Geometry.Point([55.18711451607913, 25.066809437336243]),
            {
              "Class": 0,
              "system:index": "35"
            }),
        ee.Feature(
            ee.Geometry.Point([55.178402701198756, 25.064593637150455]),
            {
              "Class": 0,
              "system:index": "36"
            }),
        ee.Feature(
            ee.Geometry.Point([55.17436865884036, 25.06284429290488]),
            {
              "Class": 0,
              "system:index": "37"
            }),
        ee.Feature(
            ee.Geometry.Point([55.16874674874514, 25.063699530990107]),
            {
              "Class": 0,
              "system:index": "38"
            }),
        ee.Feature(
            ee.Geometry.Point([55.16333941537112, 25.070580092881837]),
            {
              "Class": 0,
              "system:index": "39"
            }),
        ee.Feature(
            ee.Geometry.Point([55.15630129891604, 25.07427289043566]),
            {
              "Class": 0,
              "system:index": "40"
            }),
        ee.Feature(
            ee.Geometry.Point([55.17701478510114, 25.052834968176445]),
            {
              "Class": 0,
              "system:index": "41"
            }),
        ee.Feature(
            ee.Geometry.Point([55.17626376657697, 25.051338164916636]),
            {
              "Class": 0,
              "system:index": "42"
            }),
        ee.Feature(
            ee.Geometry.Point([55.093255697266095, 25.041730180770912]),
            {
              "Class": 0,
              "system:index": "43"
            }),
        ee.Feature(
            ee.Geometry.Point([55.091753660217755, 25.041710740123968]),
            {
              "Class": 0,
              "system:index": "44"
            }),
        ee.Feature(
            ee.Geometry.Point([55.087741075531476, 25.039397281135617]),
            {
              "Class": 0,
              "system:index": "45"
            }),
        ee.Feature(
            ee.Geometry.Point([55.08829897500657, 25.035878406910808]),
            {
              "Class": 0,
              "system:index": "46"
            }),
        ee.Feature(
            ee.Geometry.Point([55.08344954110765, 25.038522432332012]),
            {
              "Class": 0,
              "system:index": "47"
            }),
        ee.Feature(
            ee.Geometry.Point([55.079994855896466, 25.040835907822352]),
            {
              "Class": 0,
              "system:index": "48"
            }),
        ee.Feature(
            ee.Geometry.Point([55.08467262841844, 25.042488363597588]),
            {
              "Class": 0,
              "system:index": "49"
            }),
        ee.Feature(
            ee.Geometry.Point([55.32599471381077, 25.204148318991034]),
            {
              "Class": 0,
              "system:index": "50"
            }),
        ee.Feature(
            ee.Geometry.Point([55.33552192023167, 25.20531320265874]),
            {
              "Class": 0,
              "system:index": "51"
            }),
        ee.Feature(
            ee.Geometry.Point([55.33959887793431, 25.21020559233244]),
            {
              "Class": 0,
              "system:index": "52"
            }),
        ee.Feature(
            ee.Geometry.Point([55.045811969694576, 25.010396927478027]),
            {
              "Class": 0,
              "system:index": "53"
            }),
        ee.Feature(
            ee.Geometry.Point([55.05765660470434, 24.99289463221798]),
            {
              "Class": 0,
              "system:index": "54"
            }),
        ee.Feature(
            ee.Geometry.Point([55.05825741952368, 24.979669022580676]),
            {
              "Class": 0,
              "system:index": "55"
            }),
        ee.Feature(
            ee.Geometry.Point([55.03448231881567, 25.005963248498404]),
            {
              "Class": 0,
              "system:index": "56"
            }),
        ee.Feature(
            ee.Geometry.Point([55.01620038217016, 25.00821899990848]),
            {
              "Class": 0,
              "system:index": "57"
            }),
        ee.Feature(
            ee.Geometry.Point([55.01920445626684, 24.99149434089778]),
            {
              "Class": 0,
              "system:index": "58"
            })]),
    built_up = 
    /* color: #ff4f13 */
    /* shown: false */
    ee.FeatureCollection(
        [ee.Feature(
            ee.Geometry.Point([55.067465584365785, 25.02369131522018]),
            {
              "Class": 1,
              "system:index": "0"
            }),
        ee.Feature(
            ee.Geometry.Point([55.066972057907044, 25.02299134708158]),
            {
              "Class": 1,
              "system:index": "1"
            }),
        ee.Feature(
            ee.Geometry.Point([55.06360320338434, 25.02306912151632]),
            {
              "Class": 1,
              "system:index": "2"
            }),
        ee.Feature(
            ee.Geometry.Point([55.06409672984308, 25.02116363367856]),
            {
              "Class": 1,
              "system:index": "3"
            }),
        ee.Feature(
            ee.Geometry.Point([55.0600841451568, 25.021844168444858]),
            {
              "Class": 1,
              "system:index": "4"
            }),
        ee.Feature(
            ee.Geometry.Point([55.094931404678285, 25.018538678524617]),
            {
              "Class": 1,
              "system:index": "5"
            }),
        ee.Feature(
            ee.Geometry.Point([55.09426621684259, 25.01727479121023]),
            {
              "Class": 1,
              "system:index": "6"
            }),
        ee.Feature(
            ee.Geometry.Point([55.089652817336976, 25.02668557830539]),
            {
              "Class": 1,
              "system:index": "7"
            }),
        ee.Feature(
            ee.Geometry.Point([55.09458808192438, 25.02446905291462]),
            {
              "Class": 1,
              "system:index": "8"
            }),
        ee.Feature(
            ee.Geometry.Point([55.12180174833452, 25.042474720841863]),
            {
              "Class": 1,
              "system:index": "9"
            }),
        ee.Feature(
            ee.Geometry.Point([55.14405335432207, 25.039033699224476]),
            {
              "Class": 1,
              "system:index": "10"
            }),
        ee.Feature(
            ee.Geometry.Point([55.13572777753984, 25.0452546847445]),
            {
              "Class": 1,
              "system:index": "11"
            }),
        ee.Feature(
            ee.Geometry.Point([55.15000785833513, 25.05316654472128]),
            {
              "Class": 1,
              "system:index": "12"
            }),
        ee.Feature(
            ee.Geometry.Point([55.14826978689348, 25.05436202706582]),
            {
              "Class": 1,
              "system:index": "13"
            }),
        ee.Feature(
            ee.Geometry.Point([55.17592510587881, 25.05956175363262]),
            {
              "Class": 1,
              "system:index": "14"
            }),
        ee.Feature(
            ee.Geometry.Point([55.17313353228061, 25.071549308709027]),
            {
              "Class": 1,
              "system:index": "15"
            }),
        ee.Feature(
            ee.Geometry.Point([55.17551533388583, 25.06857557748907]),
            {
              "Class": 1,
              "system:index": "16"
            }),
        ee.Feature(
            ee.Geometry.Point([55.179957072014496, 25.069780627599222]),
            {
              "Class": 1,
              "system:index": "17"
            }),
        ee.Feature(
            ee.Geometry.Point([55.205684820885345, 25.092246809481285]),
            {
              "Class": 1,
              "system:index": "18"
            }),
        ee.Feature(
            ee.Geometry.Point([55.2042900721976, 25.089934304670226]),
            {
              "Class": 1,
              "system:index": "19"
            }),
        ee.Feature(
            ee.Geometry.Point([55.19714466738193, 25.09236340520518]),
            {
              "Class": 1,
              "system:index": "20"
            }),
        ee.Feature(
            ee.Geometry.Point([55.189462820763275, 25.095258830041992]),
            {
              "Class": 1,
              "system:index": "21"
            }),
        ee.Feature(
            ee.Geometry.Point([55.252448959982644, 25.13839109914676]),
            {
              "Class": 1,
              "system:index": "22"
            }),
        ee.Feature(
            ee.Geometry.Point([55.25377933565403, 25.13734212871197]),
            {
              "Class": 1,
              "system:index": "23"
            }),
        ee.Feature(
            ee.Geometry.Point([55.24326507631565, 25.136118318482]),
            {
              "Class": 1,
              "system:index": "24"
            }),
        ee.Feature(
            ee.Geometry.Point([55.23525708650107, 25.158470035024493]),
            {
              "Class": 1,
              "system:index": "25"
            }),
        ee.Feature(
            ee.Geometry.Point([55.23377650712485, 25.153361915951578]),
            {
              "Class": 1,
              "system:index": "26"
            }),
        ee.Feature(
            ee.Geometry.Point([55.22328370545859, 25.155576107893623]),
            {
              "Class": 1,
              "system:index": "27"
            }),
        ee.Feature(
            ee.Geometry.Point([55.22107356523032, 25.157790259652472]),
            {
              "Class": 1,
              "system:index": "28"
            }),
        ee.Feature(
            ee.Geometry.Point([55.21530145143027, 25.160101480462277]),
            {
              "Class": 1,
              "system:index": "29"
            }),
        ee.Feature(
            ee.Geometry.Point([55.21251195405478, 25.156294740500673]),
            {
              "Class": 1,
              "system:index": "30"
            }),
        ee.Feature(
            ee.Geometry.Point([55.25019579235857, 25.141086017818697]),
            {
              "Class": 1,
              "system:index": "31"
            }),
        ee.Feature(
            ee.Geometry.Point([55.24959497753923, 25.14112486754497]),
            {
              "Class": 1,
              "system:index": "32"
            }),
        ee.Feature(
            ee.Geometry.Point([55.24214916531389, 25.139298917047203]),
            {
              "Class": 1,
              "system:index": "33"
            }),
        ee.Feature(
            ee.Geometry.Point([55.23657017056291, 25.140309020697487]),
            {
              "Class": 1,
              "system:index": "34"
            }),
        ee.Feature(
            ee.Geometry.Point([55.215305617492845, 25.14001764550215]),
            {
              "Class": 1,
              "system:index": "35"
            }),
        ee.Feature(
            ee.Geometry.Point([55.21324568096941, 25.145320565210707]),
            {
              "Class": 1,
              "system:index": "36"
            }),
        ee.Feature(
            ee.Geometry.Point([55.2208631545717, 25.14190185947386]),
            {
              "Class": 1,
              "system:index": "37"
            }),
        ee.Feature(
            ee.Geometry.Point([55.224060347717455, 25.140911193897583]),
            {
              "Class": 1,
              "system:index": "38"
            }),
        ee.Feature(
            ee.Geometry.Point([55.207323363464525, 25.135666359859968]),
            {
              "Class": 1,
              "system:index": "39"
            }),
        ee.Feature(
            ee.Geometry.Point([55.19665015846703, 25.120389612896908]),
            {
              "Class": 1,
              "system:index": "40"
            }),
        ee.Feature(
            ee.Geometry.Point([55.196762811245655, 25.12050132475393]),
            {
              "Class": 1,
              "system:index": "41"
            }),
        ee.Feature(
            ee.Geometry.Point([55.14788253997051, 25.123939081907725]),
            {
              "Class": 1,
              "system:index": "42"
            }),
        ee.Feature(
            ee.Geometry.Point([55.1470886061021, 25.12063634636326]),
            {
              "Class": 1,
              "system:index": "43"
            }),
        ee.Feature(
            ee.Geometry.Point([55.142003137809866, 25.125978962204087]),
            {
              "Class": 1,
              "system:index": "44"
            }),
        ee.Feature(
            ee.Geometry.Point([55.135780412895315, 25.12603724399782]),
            {
              "Class": 1,
              "system:index": "45"
            }),
        ee.Feature(
            ee.Geometry.Point([55.127519209129446, 25.126231516442743]),
            {
              "Class": 1,
              "system:index": "46"
            }),
        ee.Feature(
            ee.Geometry.Point([55.12545927260601, 25.125668125501313]),
            {
              "Class": 1,
              "system:index": "47"
            }),
        ee.Feature(
            ee.Geometry.Point([55.124322015983694, 25.12203516290353]),
            {
              "Class": 1,
              "system:index": "48"
            }),
        ee.Feature(
            ee.Geometry.Point([55.08723549203856, 25.02927550683612]),
            {
              "Class": 1,
              "system:index": "49"
            }),
        ee.Feature(
            ee.Geometry.Point([55.145121557630155, 25.057879360955866]),
            {
              "Class": 1,
              "system:index": "50"
            }),
        ee.Feature(
            ee.Geometry.Point([55.140658361829374, 25.058851261333945]),
            {
              "Class": 1,
              "system:index": "51"
            }),
        ee.Feature(
            ee.Geometry.Point([55.13472099486553, 25.065349455326373]),
            {
              "Class": 1,
              "system:index": "52"
            }),
        ee.Feature(
            ee.Geometry.Point([55.13628740493023, 25.0635612475126]),
            {
              "Class": 1,
              "system:index": "53"
            }),
        ee.Feature(
            ee.Geometry.Point([55.14304657164776, 25.064844094894454]),
            {
              "Class": 1,
              "system:index": "54"
            }),
        ee.Feature(
            ee.Geometry.Point([55.15130777541363, 25.068537065387382]),
            {
              "Class": 1,
              "system:index": "55"
            }),
        ee.Feature(
            ee.Geometry.Point([55.16347427550518, 25.06698214401258]),
            {
              "Class": 1,
              "system:index": "56"
            })]),
    dubai = 
    /* color: #ffddc2 */
    /* shown: false */
    /* displayProperties: [
      {
        "type": "rectangle"
      }
    ] */
    ee.FeatureCollection(
        [ee.Feature(
            ee.Geometry.Polygon(
                [[[54.90419559325736, 25.33182963831293],
                  [54.90419559325736, 24.8330729703915],
                  [55.52492313231986, 24.8330729703915],
                  [55.52492313231986, 25.33182963831293]]], null, false),
            {
              "system:index": "0"
            })]),
    vegetation = 
    /* color: #001e1e */
    /* shown: false */
    ee.FeatureCollection(
        [ee.Feature(
            ee.Geometry.Point([55.24277176135481, 25.187610003604203]),
            {
              "Class": 3,
              "system:index": "0"
            }),
        ee.Feature(
            ee.Geometry.Point([55.24433817141951, 25.185959508542055]),
            {
              "Class": 3,
              "system:index": "1"
            }),
        ee.Feature(
            ee.Geometry.Point([55.24544324153364, 25.18512454369986]),
            {
              "Class": 3,
              "system:index": "2"
            }),
        ee.Feature(
            ee.Geometry.Point([55.26970165996561, 25.18615440980431]),
            {
              "Class": 3,
              "system:index": "3"
            }),
        ee.Feature(
            ee.Geometry.Point([55.26975530414591, 25.18565925771767]),
            {
              "Class": 3,
              "system:index": "4"
            }),
        ee.Feature(
            ee.Geometry.Point([55.26994842319498, 25.185338864118744]),
            {
              "Class": 3,
              "system:index": "5"
            }),
        ee.Feature(
            ee.Geometry.Point([55.27025955944071, 25.185202939307075]),
            {
              "Class": 3,
              "system:index": "6"
            }),
        ee.Feature(
            ee.Geometry.Point([55.278178747830005, 25.188101756686844]),
            {
              "Class": 3,
              "system:index": "7"
            }),
        ee.Feature(
            ee.Geometry.Point([55.27730971210918, 25.187480398972365]),
            {
              "Class": 3,
              "system:index": "8"
            }),
        ee.Feature(
            ee.Geometry.Point([55.27808218830547, 25.187829913076715]),
            {
              "Class": 3,
              "system:index": "9"
            }),
        ee.Feature(
            ee.Geometry.Point([55.28619904875048, 25.18318597775211]),
            {
              "Class": 3,
              "system:index": "10"
            }),
        ee.Feature(
            ee.Geometry.Point([55.285925463430964, 25.183001505068745]),
            {
              "Class": 3,
              "system:index": "11"
            }),
        ee.Feature(
            ee.Geometry.Point([55.28571088670977, 25.182836450325834]),
            {
              "Class": 3,
              "system:index": "12"
            }),
        ee.Feature(
            ee.Geometry.Point([55.28557677625903, 25.18282674121635]),
            {
              "Class": 3,
              "system:index": "13"
            }),
        ee.Feature(
            ee.Geometry.Point([55.28909583448657, 25.18243837620253]),
            {
              "Class": 3,
              "system:index": "14"
            }),
        ee.Feature(
            ee.Geometry.Point([55.28958399652728, 25.182491776465344]),
            {
              "Class": 3,
              "system:index": "15"
            }),
        ee.Feature(
            ee.Geometry.Point([55.28995950578936, 25.1825063401693]),
            {
              "Class": 3,
              "system:index": "16"
            }),
        ee.Feature(
            ee.Geometry.Point([55.29122550844439, 25.18252090387153]),
            {
              "Class": 3,
              "system:index": "17"
            }),
        ee.Feature(
            ee.Geometry.Point([55.292658400064745, 25.182559036809785]),
            {
              "Class": 3,
              "system:index": "18"
            }),
        ee.Feature(
            ee.Geometry.Point([55.292905163294115, 25.18245223631975]),
            {
              "Class": 3,
              "system:index": "19"
            }),
        ee.Feature(
            ee.Geometry.Point([55.29300172281865, 25.182296889985334]),
            {
              "Class": 3,
              "system:index": "20"
            }),
        ee.Feature(
            ee.Geometry.Point([55.292669128900805, 25.182102706788793]),
            {
              "Class": 3,
              "system:index": "21"
            }),
        ee.Feature(
            ee.Geometry.Point([55.29124755812291, 25.181680357267954]),
            {
              "Class": 3,
              "system:index": "22"
            }),
        ee.Feature(
            ee.Geometry.Point([55.29306609583501, 25.181476463871913]),
            {
              "Class": 3,
              "system:index": "23"
            }),
        ee.Feature(
            ee.Geometry.Point([55.29327530813817, 25.181588119821523]),
            {
              "Class": 3,
              "system:index": "24"
            }),
        ee.Feature(
            ee.Geometry.Point([55.293446969515124, 25.181772594644563]),
            {
              "Class": 3,
              "system:index": "25"
            }),
        ee.Feature(
            ee.Geometry.Point([55.29411215735082, 25.1823114537126]),
            {
              "Class": 3,
              "system:index": "26"
            }),
        ee.Feature(
            ee.Geometry.Point([55.294911455637255, 25.18261729158308]),
            {
              "Class": 3,
              "system:index": "27"
            }),
        ee.Feature(
            ee.Geometry.Point([55.30765065820505, 25.178508771008758]),
            {
              "Class": 3,
              "system:index": "28"
            }),
        ee.Feature(
            ee.Geometry.Point([55.307457539155976, 25.178295162835937]),
            {
              "Class": 3,
              "system:index": "29"
            }),
        ee.Feature(
            ee.Geometry.Point([55.30854115159799, 25.1761881894373]),
            {
              "Class": 3,
              "system:index": "30"
            }),
        ee.Feature(
            ee.Geometry.Point([55.31681308419992, 25.180508902098012]),
            {
              "Class": 3,
              "system:index": "31"
            }),
        ee.Feature(
            ee.Geometry.Point([55.30861625345041, 25.175799803268415]),
            {
              "Class": 3,
              "system:index": "32"
            }),
        ee.Feature(
            ee.Geometry.Point([55.3147746053486, 25.180033145736644]),
            {
              "Class": 3,
              "system:index": "33"
            }),
        ee.Feature(
            ee.Geometry.Point([55.31715640695383, 25.179703027986267]),
            {
              "Class": 3,
              "system:index": "34"
            }),
        ee.Feature(
            ee.Geometry.Point([55.30218968065073, 25.178450514271486]),
            {
              "Class": 3,
              "system:index": "35"
            }),
        ee.Feature(
            ee.Geometry.Point([55.303477140977876, 25.179236977875192]),
            {
              "Class": 3,
              "system:index": "36"
            }),
        ee.Feature(
            ee.Geometry.Point([55.30287632615854, 25.179295234236527]),
            {
              "Class": 3,
              "system:index": "37"
            }),
        ee.Feature(
            ee.Geometry.Point([55.30228624017526, 25.178431095352867]),
            {
              "Class": 3,
              "system:index": "38"
            }),
        ee.Feature(
            ee.Geometry.Point([55.30240425737192, 25.178431095352867]),
            {
              "Class": 3,
              "system:index": "39"
            }),
        ee.Feature(
            ee.Geometry.Point([55.30218968065073, 25.17835341964746]),
            {
              "Class": 3,
              "system:index": "40"
            }),
        ee.Feature(
            ee.Geometry.Point([55.30218968065073, 25.17835341964746]),
            {
              "Class": 3,
              "system:index": "41"
            }),
        ee.Feature(
            ee.Geometry.Point([55.30229696901132, 25.17844080481257]),
            {
              "Class": 3,
              "system:index": "42"
            }),
        ee.Feature(
            ee.Geometry.Point([55.30715713174631, 25.178683541053513]),
            {
              "Class": 3,
              "system:index": "43"
            }),
        ee.Feature(
            ee.Geometry.Point([55.446737665315595, 25.16457593850796]),
            {
              "Class": 3,
              "system:index": "44"
            }),
        ee.Feature(
            ee.Geometry.Point([55.44593300261113, 25.16465362299175]),
            {
              "Class": 3,
              "system:index": "45"
            }),
        ee.Feature(
            ee.Geometry.Point([55.366441306261734, 25.163326218530067]),
            {
              "Class": 3,
              "system:index": "46"
            }),
        ee.Feature(
            ee.Geometry.Point([55.36633401790114, 25.16225804091464]),
            {
              "Class": 3,
              "system:index": "47"
            }),
        ee.Feature(
            ee.Geometry.Point([55.356184538988785, 25.15845136825263]),
            {
              "Class": 3,
              "system:index": "48"
            }),
        ee.Feature(
            ee.Geometry.Point([55.35725742259474, 25.156878167818768]),
            {
              "Class": 3,
              "system:index": "49"
            }),
        ee.Feature(
            ee.Geometry.Point([55.31688591631286, 25.219308525339766]),
            {
              "Class": 3,
              "system:index": "50"
            }),
        ee.Feature(
            ee.Geometry.Point([55.31712195070617, 25.219104694945628]),
            {
              "Class": 3,
              "system:index": "51"
            }),
        ee.Feature(
            ee.Geometry.Point([55.31821629198425, 25.2185708518186]),
            {
              "Class": 3,
              "system:index": "52"
            }),
        ee.Feature(
            ee.Geometry.Point([55.318119732459714, 25.21730903147905]),
            {
              "Class": 3,
              "system:index": "53"
            }),
        ee.Feature(
            ee.Geometry.Point([55.318109003623654, 25.21949294302114]),
            {
              "Class": 3,
              "system:index": "54"
            }),
        ee.Feature(
            ee.Geometry.Point([55.31819483431213, 25.21697901476973]),
            {
              "Class": 3,
              "system:index": "55"
            }),
        ee.Feature(
            ee.Geometry.Point([55.32663842829101, 25.21806612525324]),
            {
              "Class": 3,
              "system:index": "56"
            }),
        ee.Feature(
            ee.Geometry.Point([55.3145148435437, 25.215173613399006]),
            {
              "Class": 3,
              "system:index": "57"
            })]),
    sandy_areas = 
    /* color: #d6d52f */
    /* shown: false */
    ee.FeatureCollection(
        [ee.Feature(
            ee.Geometry.Point([55.481589239347514, 25.137014826494653]),
            {
              "Class": 2,
              "system:index": "0"
            }),
        ee.Feature(
            ee.Geometry.Point([55.48334876846128, 25.135149962917403]),
            {
              "Class": 2,
              "system:index": "1"
            }),
        ee.Feature(
            ee.Geometry.Point([55.49424926589781, 25.133362775265724]),
            {
              "Class": 2,
              "system:index": "2"
            }),
        ee.Feature(
            ee.Geometry.Point([55.50274650405699, 25.133751296545263]),
            {
              "Class": 2,
              "system:index": "3"
            }),
        ee.Feature(
            ee.Geometry.Point([55.50369064163023, 25.136548613270307]),
            {
              "Class": 2,
              "system:index": "4"
            }),
        ee.Feature(
            ee.Geometry.Point([55.45450965713316, 25.13755873967331]),
            {
              "Class": 2,
              "system:index": "5"
            }),
        ee.Feature(
            ee.Geometry.Point([55.43794433425718, 25.135810438691422]),
            {
              "Class": 2,
              "system:index": "6"
            }),
        ee.Feature(
            ee.Geometry.Point([55.43399612258726, 25.135538478511226]),
            {
              "Class": 2,
              "system:index": "7"
            }),
        ee.Feature(
            ee.Geometry.Point([55.484807890165385, 25.13149785591915]),
            {
              "Class": 2,
              "system:index": "8"
            }),
        ee.Feature(
            ee.Geometry.Point([55.47716895889097, 25.131730972394784]),
            {
              "Class": 2,
              "system:index": "9"
            }),
        ee.Feature(
            ee.Geometry.Point([55.50099766097807, 25.129322080691544]),
            {
              "Class": 2,
              "system:index": "10"
            }),
        ee.Feature(
            ee.Geometry.Point([55.505417941434615, 25.13169211967973]),
            {
              "Class": 2,
              "system:index": "11"
            }),
        ee.Feature(
            ee.Geometry.Point([55.492672084195846, 25.12629147203979]),
            {
              "Class": 2,
              "system:index": "12"
            }),
        ee.Feature(
            ee.Geometry.Point([55.503143428189986, 25.12291108907965]),
            {
              "Class": 2,
              "system:index": "13"
            }),
        ee.Feature(
            ee.Geometry.Point([55.49086963973784, 25.120152316438304]),
            {
              "Class": 2,
              "system:index": "14"
            }),
        ee.Feature(
            ee.Geometry.Point([55.47439014755034, 25.1248927042274]),
            {
              "Class": 2,
              "system:index": "15"
            }),
        ee.Feature(
            ee.Geometry.Point([55.4888097032144, 25.10701815051202]),
            {
              "Class": 2,
              "system:index": "16"
            }),
        ee.Feature(
            ee.Geometry.Point([55.486191867215865, 25.108261682318528]),
            {
              "Class": 2,
              "system:index": "17"
            }),
        ee.Feature(
            ee.Geometry.Point([55.488423465116256, 25.112963672632052]),
            {
              "Class": 2,
              "system:index": "18"
            }),
        ee.Feature(
            ee.Geometry.Point([55.499409793241256, 25.10530827362822]),
            {
              "Class": 2,
              "system:index": "19"
            }),
        ee.Feature(
            ee.Geometry.Point([55.50005352340483, 25.08991830589898]),
            {
              "Class": 2,
              "system:index": "20"
            }),
        ee.Feature(
            ee.Geometry.Point([55.491685031278365, 25.08824705651223]),
            {
              "Class": 2,
              "system:index": "21"
            }),
        ee.Feature(
            ee.Geometry.Point([55.484732745511764, 25.089490779158634]),
            {
              "Class": 2,
              "system:index": "22"
            }),
        ee.Feature(
            ee.Geometry.Point([55.472973941190475, 25.088402522534277]),
            {
              "Class": 2,
              "system:index": "23"
            }),
        ee.Feature(
            ee.Geometry.Point([55.469197390897506, 25.094659865956356]),
            {
              "Class": 2,
              "system:index": "24"
            }),
        ee.Feature(
            ee.Geometry.Point([55.46361839614653, 25.089335314519104]),
            {
              "Class": 2,
              "system:index": "25"
            }),
        ee.Feature(
            ee.Geometry.Point([55.515889285428756, 25.092483434973435]),
            {
              "Class": 2,
              "system:index": "26"
            }),
        ee.Feature(
            ee.Geometry.Point([55.515417216642135, 25.09625329980469]),
            {
              "Class": 2,
              "system:index": "27"
            }),
        ee.Feature(
            ee.Geometry.Point([55.511640666349166, 25.098196483726266]),
            {
              "Class": 2,
              "system:index": "28"
            }),
        ee.Feature(
            ee.Geometry.Point([55.51026737533354, 25.087081055051584]),
            {
              "Class": 2,
              "system:index": "29"
            }),
        ee.Feature(
            ee.Geometry.Point([55.496706126554244, 25.08665351839923]),
            {
              "Class": 2,
              "system:index": "30"
            }),
        ee.Feature(
            ee.Geometry.Point([55.48584854446196, 25.0866146513568]),
            {
              "Class": 2,
              "system:index": "31"
            }),
        ee.Feature(
            ee.Geometry.Point([55.482200740201705, 25.08016255123216]),
            {
              "Class": 2,
              "system:index": "32"
            }),
        ee.Feature(
            ee.Geometry.Point([55.50151264510893, 25.077208464191266]),
            {
              "Class": 2,
              "system:index": "33"
            }),
        ee.Feature(
            ee.Geometry.Point([55.51172649703764, 25.077247334220342]),
            {
              "Class": 2,
              "system:index": "34"
            }),
        ee.Feature(
            ee.Geometry.Point([55.52069580398344, 25.081250881121452]),
            {
              "Class": 2,
              "system:index": "35"
            }),
        ee.Feature(
            ee.Geometry.Point([55.46602165542387, 25.076158968741705]),
            {
              "Class": 2,
              "system:index": "36"
            }),
        ee.Feature(
            ee.Geometry.Point([55.45443451247954, 25.0809787995562]),
            {
              "Class": 2,
              "system:index": "37"
            }),
        ee.Feature(
            ee.Geometry.Point([55.48559105239653, 25.074293176842907]),
            {
              "Class": 2,
              "system:index": "38"
            }),
        ee.Feature(
            ee.Geometry.Point([55.47327434860014, 25.063253326464913]),
            {
              "Class": 2,
              "system:index": "39"
            }),
        ee.Feature(
            ee.Geometry.Point([55.48777973495268, 25.06115408740813]),
            {
              "Class": 2,
              "system:index": "40"
            }),
        ee.Feature(
            ee.Geometry.Point([55.498894809110396, 25.06387531631514]),
            {
              "Class": 2,
              "system:index": "41"
            }),
        ee.Feature(
            ee.Geometry.Point([55.522927401883834, 25.05746089436783]),
            {
              "Class": 2,
              "system:index": "42"
            }),
        ee.Feature(
            ee.Geometry.Point([55.50352966628813, 25.057149883556885]),
            {
              "Class": 2,
              "system:index": "43"
            }),
        ee.Feature(
            ee.Geometry.Point([55.470484851224654, 25.05668336586061]),
            {
              "Class": 2,
              "system:index": "44"
            }),
        ee.Feature(
            ee.Geometry.Point([55.458468554837935, 25.06313670301645]),
            {
              "Class": 2,
              "system:index": "45"
            }),
        ee.Feature(
            ee.Geometry.Point([55.4851164340768, 25.04587520882921]),
            {
              "Class": 2,
              "system:index": "46"
            }),
        ee.Feature(
            ee.Geometry.Point([55.50116677282192, 25.044358880368478]),
            {
              "Class": 2,
              "system:index": "47"
            }),
        ee.Feature(
            ee.Geometry.Point([55.51601548192836, 25.050229688874285]),
            {
              "Class": 2,
              "system:index": "48"
            }),
        ee.Feature(
            ee.Geometry.Point([55.50902028081752, 25.050346324605798]),
            {
              "Class": 2,
              "system:index": "49"
            }),
        ee.Feature(
            ee.Geometry.Point([55.496531915644184, 25.05217360324465]),
            {
              "Class": 2,
              "system:index": "50"
            }),
        ee.Feature(
            ee.Geometry.Point([55.482756090143695, 25.048752293336904]),
            {
              "Class": 2,
              "system:index": "51"
            }),
        ee.Feature(
            ee.Geometry.Point([55.48185486791469, 25.044475521685015]),
            {
              "Class": 2,
              "system:index": "52"
            }),
        ee.Feature(
            ee.Geometry.Point([55.46644825933315, 25.044669923632707]),
            {
              "Class": 2,
              "system:index": "53"
            }),
        ee.Feature(
            ee.Geometry.Point([55.460010957697406, 25.045758568844104]),
            {
              "Class": 2,
              "system:index": "54"
            }),
        ee.Feature(
            ee.Geometry.Point([55.46125550268032, 25.049724266088763]),
            {
              "Class": 2,
              "system:index": "55"
            }),
        ee.Feature(
            ee.Geometry.Point([55.48966546056606, 25.04043189130098]),
            {
              "Class": 2,
              "system:index": "56"
            }),
        ee.Feature(
            ee.Geometry.Point([55.47863621709682, 25.040354127871552]),
            {
              "Class": 2,
              "system:index": "57"
            }),
        ee.Feature(
            ee.Geometry.Point([55.47447342870571, 25.044825444968954]),
            {
              "Class": 2,
              "system:index": "58"
            }),
        ee.Feature(
            ee.Geometry.Point([55.47039647100307, 25.04960762976544]),
            {
              "Class": 2,
              "system:index": "59"
            })]);

// Define the geometry of the United Arab Emirates
var dubai = ee.Geometry.Polygon([[
  [54.90419559325736, 25.33182963831293 ],
  [54.90419559325736, 24.8330729703915],
  [55.52492313231986, 24.8330729703915],
  [55.52492313231986, 25.33182963831293],
]]);     




// Function to mask clouds using the Sentinel-2 QA band , it is alreay prepared by GEE developers
function maskS2clouds(image) {
  var qa = image.select('QA60');
  // Create a cloud mask
  var cloudBitMask = ee.Number(2).pow(10).int();
  var cirrusBitMask = ee.Number(2).pow(11).int();
  var mask = qa.bitwiseAnd(cloudBitMask).eq(0)
               .and(qa.bitwiseAnd(cirrusBitMask).eq(0));
  return image.updateMask(mask).divide(10000); // Scale to reflectance
}

// Load the Sentinel-2 Surface Reflectance Image Collection
var dataset = ee.ImageCollection('COPERNICUS/S2_SR_HARMONIZED')
                  .filterBounds(dubai)  // Use Dubai as the ROI
                  .filterDate('2023-01-01', '2023-10-31')  // Filter by date range
                  .filter(ee.Filter.lt('CLOUDY_PIXEL_PERCENTAGE', 20))  // Filter low-cloud images
                  .map(maskS2clouds)  // Apply cloud mask
                  .median();  // Take median composite to reduce noise

// Clip the image to Dubai ROI
var clippedImage = dataset.clip(dubai);

// Visualization parameters
var visualization = {
  min: 0.0,
  max: 0.5,
  bands: ['B4', 'B3', 'B2'],
};

// Display results
Map.centerObject(clippedImage, 10);  // Center the map on the clipped image's extent
Map.addLayer(clippedImage, {bands: ['B4', 'B3', 'B2'], min: 0, max: 0.5}, 'Clipped Image');

print(clippedImage.bandNames());
var stats = clippedImage.reduceRegion({
    reducer: ee.Reducer.minMax(),
    geometry: clippedImage.geometry(),
    scale: 30
});

// Select the bands for classification
var bands = ['B2', 'B3', 'B4', 'B8', 'B11', 'B12'];
var visParams = {
  bands: ['B4', 'B3', 'B2'],  // True color bands
  min: 0,
  max: 3000,
  gamma: 1.4
};

// Merge all training FeatureCollections into one
var trainingAreas = water.merge(built_up).merge(sandy_areas).merge(vegetation);

// Sample the Sentinel-2 image at the training points
var trainingData = dataset.select(bands).sampleRegions({
  collection: trainingAreas,
  properties: ['Class'],
  scale: 10
});

var withRandom = trainingData.randomColumn();
var trainingSet = withRandom.filter(ee.Filter.lt('random', 0.7));
var validationSet = withRandom.filter(ee.Filter.gte('random', 0.3));


// Train a Random Forest classifier with 10 trees
var classifier = ee.Classifier.smileCart(10).train({
  features: trainingSet,
  classProperty: 'Class',
  inputProperties: bands
});


// Apply the classifier
var classifiedImage = dataset.select(bands).classify(classifier);
// Clip the classified image to the ROI
var clippedClassifiedImage = classifiedImage.clip(dubai);

// Visualization
var visParams = {min: 0, max: 3, palette: ['#3182bd', '#e6ab02', '#fff7bc', '#09981F']};
// Just in case you need to add the ROI to the map for futher amendments
Map.centerObject(dubai, 10); // Center map on Dubai ROI
Map.addLayer(dubai, {color: 'white'}, 'dubai');  
Map.addLayer(classifiedImage, visParams, 'Classified Image');
Map.addLayer(clippedClassifiedImage, visParams, 'Classified Image (Clipped to Dubai)');

var validation = validationSet.classify(classifier);
var confusionMatrix = validation.errorMatrix('Class', 'classification');
print('Confusion Matrix:', confusionMatrix);
print('Overall Accuracy:', confusionMatrix.accuracy());
var overallAccuracy = confusionMatrix.accuracy();  // Compute accuracy as a ratio
print('Overall Accuracy (%)', overallAccuracy.multiply(100));  // Convert to percentage
//Map.addLayer(clippedClassifiedImage, {min: 0, max: 3, palette: ['#3182bd', '#e6ab02', '#fff7bc', '#1b9e77']}, 'Classified Image');

print('Training Data:', trainingData.aggregate_histogram('Class'));
print('Validation Set Class Distribution:', validationSet.aggregate_histogram('Class'));
